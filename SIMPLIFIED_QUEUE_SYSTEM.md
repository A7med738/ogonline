# ูุธุงู ุทุงุจูุฑ ุงููุฑุถู ุงููุจุณุท - ุงุญุฌุฒูู

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุจุณูุท ูุธุงู ุทุงุจูุฑ ุงููุฑุถู ููุนุชูุฏ ุนูู **ุงูุฏูุฑ ููุท** ุจุฏูู ุญุณุงุจุงุช ุงูุฃููุงุช ุฃู ุงููุชูุณุทุงุช. ุงููุธุงู ุงูุขู ูุฑูุฒ ุนูู ุชุฑุชูุจ ุงููุฑุถู ูู ุงูุทุงุจูุฑ.

## ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ

### ๐ฏ **ูุธุงู ุงูุทุงุจูุฑ ุงููุจุณุท**
- **ุฑูู ุทุงุจูุฑ ูุฑูุฏ**: ูู ูุฑูุถ ูุญุตู ุนูู ุฑูู ุทุงุจูุฑ ุชููุงุฆูุงู
- **ููุถุน ูู ุงูุทุงุจูุฑ**: ูุฑู ุงููุฑูุถ ุชุฑุชูุจู ุจูู ุงููุฑุถู ุงูููุชุธุฑูู
- **ูุง ุชูุฌุฏ ุญุณุงุจุงุช ุฃููุงุช**: ุงููุธุงู ูุนุชูุฏ ุนูู ุงูุฏูุฑ ููุท

### ๐ **ุฅุฏุงุฑุฉ ุงูุทุงุจูุฑ ุงูุชููุงุฆูุฉ**
- **ุญุณุงุจ ุชููุงุฆู**: ูุชู ุญุณุงุจ ุฑูู ุงูุทุงุจูุฑ ูููุถุนู ุชููุงุฆูุงู ุนูุฏ ุงูุญุฌุฒ
- **ุชุญุฏูุซ ููุฑู**: ูุชู ุชุญุฏูุซ ููุงุถุน ุงููุฑุถู ุนูุฏ ุฅูุบุงุก ููุนุฏ
- **ุฅุญุตุงุฆูุงุช ุจุณูุทุฉ**: ุชุชุจุน ุนุฏุฏ ุงููุฑุถู ููู ุนูุงุฏุฉ

## ุงูุจููุฉ ุงูุชูููุฉ ุงููุจุณุทุฉ

### ๐๏ธ **ุงูุฌุฏุงูู ุงููุญุฏุซุฉ**

#### `book_service_appointments`
```sql
- queue_number: ุฑูู ุงูุทุงุจูุฑ
- queue_position: ููุถุน ุงููุฑูุถ ูู ุงูุทุงุจูุฑ
- (ุชู ุญุฐู estimated_wait_time)
```

#### `book_service_clinic_queues`
```sql
- clinic_id: ูุนุฑู ุงูุนูุงุฏุฉ
- current_queue_number: ุฑูู ุงูุทุงุจูุฑ ุงูุญุงูู
- total_patients_today: ุฅุฌูุงูู ุงููุฑุถู ุงูููู
- (ุชู ุญุฐู average_consultation_time)
```

#### `book_service_queue_status`
```sql
- clinic_id: ูุนุฑู ุงูุนูุงุฏุฉ
- status: ุญุงูุฉ ุงูุทุงุจูุฑ (active, paused, closed)
- current_serving_queue_number: ุฑูู ุงูุทุงุจูุฑ ููุฏ ุงูุฎุฏูุฉ
- next_queue_number: ุฑูู ุงูุทุงุจูุฑ ุงูุชุงูู
- (ุชู ุญุฐู estimated_wait_time)
```

### ๐ง **ุงููุธุงุฆู ุงููุจุณุทุฉ**

#### `get_next_queue_number(clinic_uuid)`
- ุชุญุณุจ ุฑูู ุงูุทุงุจูุฑ ุงูุชุงูู ููุนูุงุฏุฉ
- ุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงูููุงุนูุฏ ุงููุคูุฏุฉ ูุงููุนููุฉ ููุท

#### `calculate_queue_position(clinic_uuid, appointment_uuid)`
- ุชุญุณุจ ููุถุน ุงููุฑูุถ ูู ุงูุทุงุจูุฑ
- ุชุนุฏ ุงููุฑุถู ุงูููุชุธุฑูู ูุจู ูุฐุง ุงููุฑูุถ

#### `update_clinic_queue_on_appointment()`
- ูุชู ุชุดุบููู ุนูุฏ ุฅุถุงูุฉ ููุนุฏ ุฌุฏูุฏ
- ูุญุณุจ ุฑูู ุงูุทุงุจูุฑ ูููุถุนู ุชููุงุฆูุงู
- ูุญุฏุซ ุฅุญุตุงุฆูุงุช ุงูุทุงุจูุฑ

### โก **Triggers ุงููุจุณุทุฉ**

#### `trigger_update_clinic_queue`
- ูุชู ุชุดุบููู ุนูุฏ ุฅุถุงูุฉ ููุนุฏ ุฌุฏูุฏ
- ูุญุณุจ ุฑูู ุงูุทุงุจูุฑ ูููุถุนู ููุท
- ูุญุฏุซ ุฅุญุตุงุฆูุงุช ุงูุทุงุจูุฑ

## ุงููุงุฌูุฉ ุงููุญุฏุซุฉ

### ๐ฑ **ุตูุญุฉ ุชุฃููุฏ ุงูููุนุฏ**
- ุนุฑุถ ุฑูู ุงูุทุงุจูุฑ ุจุดูู ุจุงุฑุฒ (#5)
- ููุถุน ุงููุฑูุถ ูู ุงูุทุงุจูุฑ (3)
- ูุนูููุงุช ูููุฉ ูููุฑูุถ (ุจุฏูู ุฃููุงุช)

### ๐ **ุตูุญุฉ ููุงุนูุฏู**
- ุนุฑุถ ูุนูููุงุช ุงูุทุงุจูุฑ ูู ูู ููุนุฏ
- ุจุทุงูุงุช ููููุฉ ููุนูููุงุช ุงูุทุงุจูุฑ (ุฑูู + ููุถุน ููุท)
- ุชุญุฏูุซ ููุฑู ูููุนูููุงุช

## ูุซุงู ุนูู ุงูุนูู ุงููุจุณุท

### ุนูุฏ ุญุฌุฒ ููุนุฏ ุฌุฏูุฏ:
1. **ุงููุฑูุถ ูุญุฌุฒ**: ููุนุฏ ูุน ุฏ. ุฃุญูุฏ (ุทุจ ุนุงู)
2. **ุงููุธุงู ูุญุณุจ**: ุฑูู ุงูุทุงุจูุฑ = 5ุ ููุถุน = 3
3. **ุงููุฑูุถ ูุฑู**: "ุฑูู ุทุงุจูุฑู #5ุ ููุถุนู ุงูุซุงูุซ ูู ุงูุทุงุจูุฑ"

### ุนูุฏ ุฅูุบุงุก ููุนุฏ:
1. **ูุฑูุถ ููุบู**: ููุนุฏ ุฑูู 3
2. **ุงููุธุงู ูุนูุฏ ุญุณุงุจ**: ููุงุถุน ุงููุฑุถู ุงููุชุจููู
3. **ุงููุฑุถู ูุฑู**: ููุงุถุน ูุญุฏุซุฉ ูู ุงูุทุงุจูุฑ

## ุงููุฒุงูุง ุงููุจุณุทุฉ

### ูููุฑุถู:
- โ ุดูุงููุฉ ูุงููุฉ ูู ุชุฑุชูุจ ุงูุทุงุจูุฑ
- โ ูุนุฑูุฉ ุฏูููุฉ ูููุถุนูู
- โ ุชุฌุฑุจุฉ ุญุฌุฒ ุจุณูุทุฉ ููุงุถุญุฉ

### ููุฃุทุจุงุก:
- โ ุฅุฏุงุฑุฉ ุจุณูุทุฉ ููุทุงุจูุฑ
- โ ุฅุญุตุงุฆูุงุช ูุงุถุญุฉ
- โ ูุง ุชูุฌุฏ ุชุนููุฏุงุช ูู ุงูุญุณุงุจุงุช

### ููุฅุฏุงุฑุฉ:
- โ ุชุชุจุน ุฃุฏุงุก ุงูุนูุงุฏุงุช
- โ ุชูุงุฑูุฑ ุจุณูุทุฉ ููููููุฉ
- โ ูุธุงู ุณูู ุงูุตูุงูุฉ

## ุงูุชุทุจูู

### 1. ุชุดุบูู ููู SQL
```bash
# ุชุดุบูู ุงูููู ุงูุฑุฆูุณู ุงููุญุฏุซ
supabase/migrations/20250125000000_create_book_service_health_system.sql

# ุชุดุบูู ูุธุงู ุงูุทุงุจูุฑ ุงููุจุณุท
supabase/migrations/20250125000001_add_queue_system.sql
```

### 2. ุงุฎุชุจุงุฑ ุงููุธุงู ุงููุจุณุท
1. ุงุญุฌุฒ ููุนุฏ ุฌุฏูุฏ
2. ุชุญูู ูู ุฑูู ุงูุทุงุจูุฑ ูู ุตูุญุฉ ุงูุชุฃููุฏ
3. ุชุญูู ูู ููุถุนู ูู ุงูุทุงุจูุฑ
4. ุฌุฑุจ ุฅูุบุงุก ููุนุฏ ูุฑุงูุจ ุงูุชุญุฏูุซุงุช

## ุงููุฑูู ุนู ุงููุธุงู ุงูุณุงุจู

### โ **ุชู ุญุฐูู:**
- ุญุณุงุจุงุช ุฃููุงุช ุงูุงูุชุธุงุฑ
- ูุชูุณุทุงุช ุฃููุงุช ุงูุงุณุชุดุงุฑุฉ
- ุชูุฏูุฑุงุช ุงูุฃููุงุช ุงููุชููุนุฉ
- ุชุนููุฏุงุช ุงูุญุณุงุจุงุช ุงูุฒูููุฉ

### โ **ุชู ุงูุงุญุชูุงุธ ุจู:**
- ุฑูู ุงูุทุงุจูุฑ ุงููุฑูุฏ
- ููุถุน ุงููุฑูุถ ูู ุงูุทุงุจูุฑ
- ุงูุชุญุฏูุซ ุงูุชููุงุฆู ููุทุงุจูุฑ
- ุฅุญุตุงุฆูุงุช ุนุฏุฏ ุงููุฑุถู

## ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงููุธุงู ุงูุขู **ุจุณูุท ููุงุถุญ**:
- **ุฑูู ุทุงุจูุฑ**: #5
- **ููุถุน ูู ุงูุทุงุจูุฑ**: 3
- **ูุง ุชูุฌุฏ ุฃููุงุช ูุนูุฏุฉ**

ุงููุฑูุถ ูุนุฑู ููุถุนู ูู ุงูุทุงุจูุฑ ููุณุชุฏุนู ุญุณุจ ุฑูููุ ููุฐุง ูู ูุง ูุญุชุงุฌู! ๐ฏ

---
**ุชุงุฑูุฎ ุงูุชุญุฏูุซ**: 2025-01-25  
**ุงูุฅุตุฏุงุฑ**: 2.1 (ูุจุณุท)  
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุฅูุชุงุฌ โ
